{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  btnStart: document.querySelector('.btn-start'),\n  input: document.querySelector('.input'),\n  day: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nelements.btnStart.setAttribute('disabled', '');\nlet userSelectedDate = null;\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const currentDate = new Date();\n    if (selectedDates[0] > currentDate) {\n      elements.btnStart.removeAttribute('disabled');\n      userSelectedDate = selectedDates[0];\n    } else {\n      iziToast.show({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n      });\n\n      elements.btnStart.setAttribute('disabled', '');\n    }\n  },\n};\nflatpickr('#datetime-picker', options);\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  let days = Math.floor(ms / day);\n  let hours = Math.floor((ms % day) / hour);\n  let minutes = Math.floor(((ms % day) % hour) / minute);\n  let seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  if (ms <= 0) {\n    days = 0;\n    hours = 0;\n    minutes = 0;\n    seconds = 0;\n  }\n  return {\n    days: addLeadingZero(days),\n    hours: addLeadingZero(hours),\n    minutes: addLeadingZero(minutes),\n    seconds: addLeadingZero(seconds),\n  };\n}\n\nelements.btnStart.addEventListener('click', handlerTimer);\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction handlerTimer() {\n  if (!userSelectedDate) {\n    return;\n  }\n\n  const currentDate = new Date();\n  const milliseconds = userSelectedDate.getTime() - currentDate.getTime();\n  const timeParts = convertMs(milliseconds);\n\n  elements.day.textContent = timeParts.days;\n  elements.hours.textContent = timeParts.hours;\n  elements.minutes.textContent = timeParts.minutes;\n  elements.seconds.textContent = timeParts.seconds;\n\n  setInterval(() => {\n    const newCurrentDate = new Date();\n    const newMilliseconds =\n      userSelectedDate.getTime() - newCurrentDate.getTime();\n    const newTimeParts = convertMs(newMilliseconds);\n\n    elements.day.textContent = newTimeParts.days;\n    elements.hours.textContent = newTimeParts.hours;\n    elements.minutes.textContent = newTimeParts.minutes;\n    elements.seconds.textContent = newTimeParts.seconds;\n  }, 1000);\n\n  elements.btnStart.setAttribute('disabled', '');\n  elements.input.setAttribute('disabled', '');\n}\n"],"names":["elements","userSelectedDate","options","selectedDates","currentDate","iziToast","flatpickr","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","handlerTimer","value","milliseconds","timeParts","newCurrentDate","newMilliseconds","newTimeParts"],"mappings":"4xBAKA,MAAMA,EAAW,CACf,SAAU,SAAS,cAAc,YAAY,EAC7C,MAAO,SAAS,cAAc,QAAQ,EACtC,IAAK,SAAS,cAAc,aAAa,EACzC,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEAA,EAAS,SAAS,aAAa,WAAY,EAAE,EAC7C,IAAIC,EAAmB,KACvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAc,IAAI,KACpBD,EAAc,CAAC,EAAIC,GACrBJ,EAAS,SAAS,gBAAgB,UAAU,EAC5CC,EAAmBE,EAAc,CAAC,IAElCE,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,oCACjB,CAAO,EAEDL,EAAS,SAAS,aAAa,WAAY,EAAE,EAEhD,CACH,EACAM,EAAU,mBAAoBJ,CAAO,EAErC,SAASK,EAAUC,EAAI,CAMrB,IAAIC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAEhE,OAAIA,GAAM,IACRC,EAAO,EACPC,EAAQ,EACRC,EAAU,EACVC,EAAU,GAEL,CACL,KAAMC,EAAeJ,CAAI,EACzB,MAAOI,EAAeH,CAAK,EAC3B,QAASG,EAAeF,CAAO,EAC/B,QAASE,EAAeD,CAAO,CACnC,CACA,CAEAZ,EAAS,SAAS,iBAAiB,QAASc,CAAY,EAExD,SAASD,EAAeE,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASD,GAAe,CACtB,GAAI,CAACb,EACH,OAGF,MAAMG,EAAc,IAAI,KAClBY,EAAef,EAAiB,QAAS,EAAGG,EAAY,QAAO,EAC/Da,EAAYV,EAAUS,CAAY,EAExChB,EAAS,IAAI,YAAciB,EAAU,KACrCjB,EAAS,MAAM,YAAciB,EAAU,MACvCjB,EAAS,QAAQ,YAAciB,EAAU,QACzCjB,EAAS,QAAQ,YAAciB,EAAU,QAEzC,YAAY,IAAM,CAChB,MAAMC,EAAiB,IAAI,KACrBC,EACJlB,EAAiB,QAAO,EAAKiB,EAAe,QAAO,EAC/CE,EAAeb,EAAUY,CAAe,EAE9CnB,EAAS,IAAI,YAAcoB,EAAa,KACxCpB,EAAS,MAAM,YAAcoB,EAAa,MAC1CpB,EAAS,QAAQ,YAAcoB,EAAa,QAC5CpB,EAAS,QAAQ,YAAcoB,EAAa,OAC7C,EAAE,GAAI,EAEPpB,EAAS,SAAS,aAAa,WAAY,EAAE,EAC7CA,EAAS,MAAM,aAAa,WAAY,EAAE,CAC5C"}